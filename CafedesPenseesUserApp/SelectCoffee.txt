<!DOCTYPE HTML>
<html>
    <head>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
        <script>
            $(document).ready(function(){
                $.ajax({
                    url:'http://localhost:8080/CafedesPensees/API/GetInStockBeanTypes',
                    type:'GET',
                    dataType: 'json',
                    success: function( json ) {
                        $.each(json, function(i, obj) {
                            console.log(obj.BeanType);
                            $('#BeanType').append($('<option onselect="GetCoffeeTypes()">').text(obj.BeanType + ' ' + obj.RoastType).attr('value', obj.BeanID));
                        });
                    }
                });
            });

            function GetCoffeeTypes(keyword) {
                //var min_length = 0; // min caracters to display the autocomplete
                //var keyword = $('#BeanID').val();
                console.log(keyword);
                $.ajax({
                    url:'http://localhost:8080/CafedesPensees/API/GetSelectedBeanCoffees/' + keyword,
                    type:'GET',
                    dataType: 'json',
                    success: function( json ) {
                        $.each(json, function(i, obj) {
                            console.log(obj.BeanType);
                            $('#CoffeeType').append($('<option>').text(obj.CoffeeName).attr('value', obj.CoffeeID));
                        });
                    }
                });
            }
        </script>
        <script src="FormToggels.js"></script>
        <link rel="stylesheet" type="text/css" href="Pure.css">
        <meta name="viewport" content="width=device-width, initial-scale=1">
    </head>
    <body>
        <form class="pure-form pure-form-aligned" action=".Controller.php?action=NewBranch" method="post">
            <div class="pure-control-group">
                <label for="BeanType">Bean Type</label>
                    <select id="BeanType" onchange="GetCoffeeTypes(this.value)">
                        <option value="" hidden></option>
                    </select>
            </div>
            <div class="pure-control-group">
                <label for="CoffeeType">Coffee Type</label>
                    <select id="CoffeeType">
                        <option value="" hidden></option>
                    </select>
            </div>
            <!--<div class="pure-control-group">
                <label for="FlavourType">Flavour Type</label>
                <input type="text" id="FlavourType" name="FlavourType" required/>
            </div>-->
            <div class="pure-control-group">
                <label for="Quantity">Quantity</label>
                <input type="Number" id="Quantity" name="Quantity" min="1" max="10" value="1"/>
            </div>
            <div class="pure-control-group">
                <label for="CupSize">Cup Size</label>
                    <select name="CupSize">
                        <option value="" hidden ></option>
                        <option value="Small">Small</option>
                        <option value="Medium">Medium</option>
                        <option value="Large">Large</option>
                    </select>
            </div>
            <div class="pure-controls">
                <button type="submit">Continue</button>
            </div>
        </form>
    </body>
</html>